

<div class="card">
    <p-table
        #dt2
        [value]="candidateList"
       
        [rows]="5"
        [showCurrentPageReport]="true"
        [rowsPerPageOptions]="[10, 25, 50]"
       
        [paginator]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [globalFilterFields]="['candidateName', 'email_Managername', 'email_Filename', 'skills','results','score']"
        [tableStyle]="{ 'min-width': '75rem' }"
        >
        
        <ng-template pTemplate="header">

            <tr>
                <th colspan="10">
                    <div class="filter-components">
                    <div>
                        <span class="p-input-icon-right ml-auto">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" (input)="dt2.filterGlobal($any($event.target).value, 'contains')" placeholder="Search keyword" />
                        </span>
                    </div>
                    <div>
                        <p-columnFilter field="email_Managername" matchMode="in" [showMenu]="false" [showClearButton]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                              <p-multiSelect [ngModel]="value" appendTo="body" [options]="managerOption" placeholder="Manager" (onChange)="filter($event.value)"  [maxSelectedLabels]="1" [selectedItemsLabel]="'{0} items'">
                                <ng-template let-option pTemplate="item">
                                  <div class="inline-block vertical-align-middle">
                                    <span class="ml-1 mt-1">{{ option}}</span>
                                  </div>
                                </ng-template>
                              </p-multiSelect>
                            </ng-template>
                          </p-columnFilter>
                    </div>
                    <div>
                        <p-columnFilter field="candidateName" matchMode="in" [showMenu]="false" [showClearButton]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                              <p-multiSelect [ngModel]="value" appendTo="body" [options]="candidateNames" placeholder="Candidate(s)" (onChange)="filter($event.value)"  [maxSelectedLabels]="1" [selectedItemsLabel]="'{0} items'">
                                <ng-template let-option pTemplate="item">
                                  <div class="inline-block vertical-align-middle">
                                    <span class="ml-1 mt-1">{{ option}}</span>
                                  </div>
                                </ng-template>
                              </p-multiSelect>
                            </ng-template>
                          </p-columnFilter>
                    </div>
                    <div>
                        <p-columnFilter field="results" matchMode="equals" [showMenu]="false" [showClearButton]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-dropdown [ngModel]="value" [options]="status" (onChange)="filter($event.value)" placeholder="Status" [showClear]="true">
                                    <ng-template let-option pTemplate="item">
                                         <p-tag [value]="option" [ngClass]="getResultClass(option)"></p-tag> 
                                         <span class="ml-1 mt-1">{{ option}}</span> 
                                    </ng-template>
                                </p-dropdown>
                            </ng-template>
                        </p-columnFilter>
                    </div>
                    <div>
                        <p-columnFilter field="skills" matchMode="contains"[showMenu]="false" [showClearButton]="true">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                              <p-multiSelect [ngModel]="value" appendTo="body" [options]="skillSet" placeholder="Skills" (onChange)="filter($event.value)"  [maxSelectedLabels]="1" [selectedItemsLabel]="'{0} items'">
                                <ng-template let-option pTemplate="item">
                                  <div class="inline-block vertical-align-middle">
                                    <span class="ml-1 mt-1">{{option}}</span>
                                  </div>
                                </ng-template>
                              </p-multiSelect>
                            </ng-template>
                          </p-columnFilter>
                    </div>
                    <div>
                        <button pButton label="Clear filter" class="p-button-outlined p-button-danger" [style]="{width:'130px'}" (click)="clear(dt2)"></button>
                    </div>
                    </div>
                </th>
            </tr>
            <tr>
                <th >Seq.No</th>
                <th >candidateName</th>
                <th >Manager</th>
               
                <th >Assessment</th>
                <th >Date</th>
                <th >Skills</th>
                <th >Result</th>
                <th>Score(%)</th>
                <th></th>
                <th></th>
                
              </tr>
           
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-i="rowIndex">
            <tr>
                <td>{{ i + 1 }}</td>
                <td>{{ rowData.candidateName }}</td>
                <td>{{ rowData.email_Managername }}</td>
                <td>{{ rowData.email_Filename
                }}</td>
                <td>{{ rowData.Managername }}</td>
                
                <td class="skills">
                  <span  *ngFor="let item of getFormattedSkills(tempSkills).skills">
                      <p-chip [style]="{'font-size':'12px'}"  label={{item}} ></p-chip>
                  </span> <span *ngIf="getFormattedSkills(tempSkills).remainingCount > 0">+
                    <p-overlayPanel #op>
                     <ul *ngFor="let skill of remainaingSkills(getFormattedSkills(tempSkills).remainingCount) ">
                      <li>
                        {{skill}}
                      </li>
                     </ul>
                  </p-overlayPanel>
                          <p-badge  (click)="op.toggle($event)" [value]="getFormattedSkills(tempSkills).remainingCount.toString()"></p-badge>
                      </span>
              </td>
             
              <td><p [ngClass]="getResultClass(rowData.results)">{{ rowData.results }}</p> </td>
              <td>{{ rowData.score }}</td>

              <td> <i class="pi pi-check" style="color: #C1ABD3
                "></i></td>
              <td><i class="pi pi-ellipsis-h"></i></td>
              </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5">Not found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>